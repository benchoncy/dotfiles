# ~/.zshrc

# oh-my-zsh
ZSH=$HOME/.oh-my-zsh
ZSH_THEME="bstuart"
HIST_STAMPS="yyyy-mm-dd"

zstyle ':omz:update' mode disabled

# enable plugins
plugins=(
  git
  zsh-autosuggestions
)

# preferred editor
EDITOR='nvim'

# general env
{{ $linux1PPath := "~/.1password/agent.sock" -}}
{{ $macOS1PPath := "~/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock" -}}
{{ if and (eq .chezmoi.os "linux") (stat $linux1PPath) -}}
export SSH_AUTH_SOCK={{ $linux1PPath }}
{{ else if and (eq .chezmoi.os "darwin") (stat $macOS1PPath) -}}
export SSH_AUTH_SOCK={{ $macOS1PPath }}
{{- end }}
export LANG=en_GB.UTF-8

# custom scripts
export PATH="$PATH:$HOME/.local/scripts:$HOME/.local/bin"

# pyenv
export PYENV_ROOT="$HOME/.pyenv"
export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init --path)"

# conda
conda_init() {
  __conda_setup="$('$HOME/miniconda/bin/conda' 'shell.zsh' 'hook' 2> /dev/null)"
  if [ $? -eq 0 ]; then
      eval "$__conda_setup"
  elif [ -f "$HOME/miniconda/etc/profile.d/conda.sh" ]; then
      . "$HOME/miniconda/etc/profile.d/conda.sh"
  else
      export PATH="$HOME/miniconda/bin:$PATH"
  fi
}
conda_init

# aliases
alias zshconfig="chezmoi edit ~/.zshrc"
alias dotconfig="chezmoi edit"

source $ZSH/oh-my-zsh.sh
