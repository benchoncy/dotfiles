# ~/.zshrc

# oh-my-zsh
ZSH=$HOME/.oh-my-zsh
ZSH_THEME="bstuart"
HIST_STAMPS="yyyy-mm-dd"

zstyle ':omz:update' mode disabled

# enable plugins
plugins=(
  git
  zsh-autosuggestions
  aws
  kubectl
  pip
  poetry
  pipenv
  pyenv
  python
  terraform
  ansible
  vagrant
)

# preferred editor
EDITOR='evim'

# general env
{{ if eq .chezmoi.os "linux" -}}
export SSH_AUTH_SOCK=~/.1password/agent.sock
{{ else if eq .chezmoi.os "darwin" }}
export SSH_AUTH_SOCK=~/Library/Group\ Containers/2BUA8C4S2C.com.1password/t/agent.sock
{{- end }}
export LANG=en_GB.UTF-8

# custom scripts
export PATH="$PATH:$HOME/.local/scripts:$HOME/.local/bin"

# pyenv
export PYENV_ROOT="$HOME/.pyenv"
export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init --path)"

# conda
# >>> conda initialize >>>
__conda_setup="$('$HOME/miniconda/bin/conda' 'shell.zsh' 'hook' 2> /dev/null)"
if [ $? -eq 0 ]; then
    eval "$__conda_setup"
else
    if [ -f "$HOME/miniconda/etc/profile.d/conda.sh" ]; then
        . "$HOME/miniconda/etc/profile.d/conda.sh"
    else
        export PATH="$HOME/miniconda/bin:$PATH"
    fi
fi
unset __conda_setup
# <<< conda initialize <<<

# aliases
alias zshconfig="chezmoi edit ~/.zshrc"

source $ZSH/oh-my-zsh.sh
